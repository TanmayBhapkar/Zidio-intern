{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Pictures\\\\blogging platform\\\\blogging platform\\\\blogging platform\\\\blog-frontend\\\\src\\\\pages\\\\BlogDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { fetchBlog, toggleLike, deleteBlog } from \"../services/blogService\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport CommentSection from \"../components/CommentSection\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function BlogDetails() {\n  _s();\n  var _blog$author, _blog$likes, _blog$likes2, _blog$author2;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [blog, setBlog] = useState(null);\n  const load = async () => {\n    const data = await fetchBlog(id);\n    setBlog(data);\n  };\n  useEffect(() => {\n    load();\n  }, [id]);\n  const like = async () => {\n    await toggleLike(id);\n    await load();\n  };\n  const remove = async () => {\n    if (!window.confirm(\"Delete post?\")) return;\n    await deleteBlog(id);\n    navigate(\"/dashboard\");\n  };\n  if (!blog) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 21\n  }, this);\n  const user = JSON.parse(localStorage.getItem(\"user\")) || {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: blog.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"meta\",\n      children: [\"By \", (_blog$author = blog.author) === null || _blog$author === void 0 ? void 0 : _blog$author.name, \" \\u2022 \", new Date(blog.createdAt).toLocaleString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), blog.images && blog.images.length > 0 && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: blog.images[0].url,\n      alt: \"cover\",\n      className: \"detail-img\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 49\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      dangerouslySetInnerHTML: {\n        __html: blog.content\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: like,\n        children: [(_blog$likes = blog.likes) !== null && _blog$likes !== void 0 && _blog$likes.includes(user._id) ? \"Unlike\" : \"Like\", \" (\", ((_blog$likes2 = blog.likes) === null || _blog$likes2 === void 0 ? void 0 : _blog$likes2.length) || 0, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), user._id === ((_blog$author2 = blog.author) === null || _blog$author2 === void 0 ? void 0 : _blog$author2._id) && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/blogs/edit/${id}`),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: remove,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CommentSection, {\n      comments: blog.comments || [],\n      blogId: id,\n      refresh: load\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_s(BlogDetails, \"WZRlf1Ot3as6TBbuVQR1IxQ+NbQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = BlogDetails;\nvar _c;\n$RefreshReg$(_c, \"BlogDetails\");","map":{"version":3,"names":["React","useEffect","useState","fetchBlog","toggleLike","deleteBlog","useParams","useNavigate","CommentSection","jsxDEV","_jsxDEV","Fragment","_Fragment","BlogDetails","_s","_blog$author","_blog$likes","_blog$likes2","_blog$author2","id","navigate","blog","setBlog","load","data","like","remove","window","confirm","children","fileName","_jsxFileName","lineNumber","columnNumber","user","JSON","parse","localStorage","getItem","className","title","author","name","Date","createdAt","toLocaleString","images","length","src","url","alt","dangerouslySetInnerHTML","__html","content","onClick","likes","includes","_id","comments","blogId","refresh","_c","$RefreshReg$"],"sources":["C:/Users/user/OneDrive/Pictures/blogging platform/blogging platform/blogging platform/blog-frontend/src/pages/BlogDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { fetchBlog, toggleLike, deleteBlog } from \"../services/blogService\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport CommentSection from \"../components/CommentSection\";\n\nexport default function BlogDetails() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [blog, setBlog] = useState(null);\n\n  const load = async () => {\n    const data = await fetchBlog(id);\n    setBlog(data);\n  };\n\n  useEffect(() => { load(); }, [id]);\n\n  const like = async () => { await toggleLike(id); await load(); };\n\n  const remove = async () => {\n    if (!window.confirm(\"Delete post?\")) return;\n    await deleteBlog(id);\n    navigate(\"/dashboard\");\n  };\n\n  if (!blog) return <div>Loading...</div>;\n\n  const user = JSON.parse(localStorage.getItem(\"user\")) || {};\n\n  return (\n    <div className=\"container\">\n      <h1>{blog.title}</h1>\n      <div className=\"meta\">By {blog.author?.name} â€¢ {new Date(blog.createdAt).toLocaleString()}</div>\n      {blog.images && blog.images.length > 0 && <img src={blog.images[0].url} alt=\"cover\" className=\"detail-img\" />}\n      <div className=\"content\" dangerouslySetInnerHTML={{ __html: blog.content }} />\n      <div className=\"actions\">\n        <button onClick={like}>{blog.likes?.includes(user._id) ? \"Unlike\" : \"Like\"} ({blog.likes?.length || 0})</button>\n        {user._id === blog.author?._id && (\n          <>\n            <button onClick={()=>navigate(`/blogs/edit/${id}`)}>Edit</button>\n            <button onClick={remove}>Delete</button>\n          </>\n        )}\n      </div>\n\n      <CommentSection comments={blog.comments || []} blogId={id} refresh={load} />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}